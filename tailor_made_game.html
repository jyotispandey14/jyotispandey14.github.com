<html>
<head>
	<title>Tailor Made Game</title>
</head>
<body>



	<script src="http://connect.facebook.net/en_US/all.js"></script>

	<script type="text/javascript">
            var loggedIn = false;        

            function loginFacebook() 
            {
                alert("ABC");
            }        

            function loadAlbums()
            {         
                 FB.init({
					appId  : '449074668545690',
					status : true, // check login status
					cookie : true, // enable cookies to allow the server to access the session
					xfbml  : true  // parse XFBML
				});
				
				(function(d, s, id){
					 var js, fjs = d.getElementsByTagName(s)[0];
					 if (d.getElementById(id)) {return;}
					 js = d.createElement(s); js.id = id;
					 js.src = "//connect.facebook.net/en_US/all.js";
					 fjs.parentNode.insertBefore(js, fjs);
				 }(document, 'script', 'facebook-jssdk'));
				
				FB.login(function(response)
					{
					alert("I am inside FB.login");
					if (response.authResponse)
					{
					   document.getElementById("status").innerHTML = "Getting album information from your Facebook profile";
					   alert(document.getElementById("status").innerHTML);
						var counter = 0;
						FB.api('/me/albums', function(response) 
						{
						alert('updated');
							var d = response.data;
							var l = d.length;
							alert('Check the data.. !!' + d + ' l = ' + l);
							for (var i=0; i<l; i++)
							{
								var v = 0;
								alert(i);
								var image_arr = photos[v]["images"];
								alert('check here' + image_arr.length);
								var subImages_text1 = "Photo "+(v+1);
								alert('check here 2 ' + subImages_text1);
								var subImages_text2 = '<img src="'+image_arr[(image_arr.length-1)]["source"]+'" />';
								alert('check here 3 ' + subImages_text2);
								var subImages_text3 = "";
								alert('For this image -- ' + image_arr.length + 'photos present');
								for(var j = 0 ;j<image_arr.length;j++) {
									subImages_text3 += '<a target="_blank" href="'+image_arr[j]["source"]+'">Photo('+image_arr[j]["width"]+"X"+image_arr[j]["height"]+')</a><br/>';
								}
								addNewRow(subImages_text1,subImages_text2,subImages_text3);//addOption(response["data"][i].name,response["data"][i].id);
								
								counter++;
							} 
							document.getElementById("status").innerHTML = "There are "+ counter +" albums in your Facebook profile";
							alert(document.getElementById("status").innerHTML);
						});
					}
					},{scope:'read_stream,publish_stream,offline_access,user_photos,friends_photos,user_photo_video_tags,friends_photo_video_tags'});

					FB.api('/me', function(response) {
					  alert('Your name is ' + response.name);
					});

            }

            //Adds a new option into the drop down box
            function addOption(opText,opVal) 
            {
                var v = document.getElementById("albumsList");             
                v.innerHTML += '<br/><a  href="facebookphotos.aspx?album='+opVal+'&name='+opText+'">'+opText+'</a>';               
            }

            function init() 
            {
                var v1 = document.getElementById("albumBtn");
                v1.onclick = loadAlbums;           
            }

            //calls init function once all the resources are loaded
            window.addEventListener("load",init,true);
        </script>      
	<h1>Check for the status updates here..</h1>
	<p id="status"> ... </p>
	<button type="button" id="albumBtn">Click here!!</button> 

</body>

</html>
