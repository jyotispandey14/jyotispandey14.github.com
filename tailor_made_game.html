<html>
<head>
	<title>Tailor Made Game</title>
</head>
<body>



	<script src="http://connect.facebook.net/en_US/all.js"></script>

	<script type="text/javascript">
            var loggedIn = false;        

            function loginFacebook() 
            {
                alert("ABC");
            }        

            function loadAlbums()
            {         
                 FB.init({
					appId  : '449074668545690',
					status : true, // check login status
					cookie : true, // enable cookies to allow the server to access the session
					xfbml  : true  // parse XFBML
				});
				
				(function(d, s, id){
					 var js, fjs = d.getElementsByTagName(s)[0];
					 if (d.getElementById(id)) {return;}
					 js = d.createElement(s); js.id = id;
					 js.src = "//connect.facebook.net/en_US/all.js";
					 fjs.parentNode.insertBefore(js, fjs);
				 }(document, 'script', 'facebook-jssdk'));
				
				FB.login(function(response)
					{
					alert("I am inside FB.login");
					if (response.authResponse)
					{
					   document.getElementById("status").innerHTML = "Getting album information from your Facebook profile";
					   alert(document.getElementById("status").innerHTML);
						var counter = 0;
						FB.api('/me/albums', function(response) 
						{
							var d=response.data;
							alert("inside getting your album");
							for (var i=0, l=d.length; i<l; i++)
							{
								addOption(response["data"][i].name,response["data"][i].id);
								counter++;
							}
							document.getElementById("status").innerHTML = "There are "+ counter +" albums in your Facebook profile";
						});
					}
					},{scope:'read_stream,publish_stream,offline_access,user_photos,friends_photos,user_photo_video_tags,friends_photo_video_tags'});

					FB.api('/me', function(response) {
					  alert('Your name is ' + response.name);
					});

            }

            //Adds a new option into the drop down box
            function addOption(opText,opVal) 
            {
                var v = document.getElementById("albumsList");             
                v.innerHTML += '<br/><a  href="facebookphotos.aspx?album='+opVal+'&name='+opText+'">'+opText+'</a>';               
            }

            function init() 
            {
                var v1 = document.getElementById("albumBtn");
                v1.onclick = loadAlbums;           
            }

            //calls init function once all the resources are loaded
            window.addEventListener("load",init,true);
        </script>      
	<h1>Check for the status updates here..</h1>
	<p id="status"> ... </p>
	<button type="button" id="albumBtn">Click here!!</button> 

</body>

</html>
